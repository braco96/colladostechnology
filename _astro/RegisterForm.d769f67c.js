import{r as o}from"./index.b2a7ed32.js";var y={exports:{}},h={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v=o,S=Symbol.for("react.element"),R=Symbol.for("react.fragment"),O=Object.prototype.hasOwnProperty,U=v.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,k={key:!0,ref:!0,__self:!0,__source:!0};function w(i,r,a){var t,n={},d=null,u=null;a!==void 0&&(d=""+a),r.key!==void 0&&(d=""+r.key),r.ref!==void 0&&(u=r.ref);for(t in r)O.call(r,t)&&!k.hasOwnProperty(t)&&(n[t]=r[t]);if(i&&i.defaultProps)for(t in r=i.defaultProps,r)n[t]===void 0&&(n[t]=r[t]);return{$$typeof:S,type:i,key:d,ref:u,props:n,_owner:U.current}}h.Fragment=R;h.jsx=w;h.jsxs=w;y.exports=h;var e=y.exports;function L(){const[i,r]=o.useState([]),[a,t]=o.useState({email:"",password:""}),[n,d]=o.useState(null),[u,p]=o.useState(null),[m,f]=o.useState(!1),[l,_]=o.useState(null);o.useEffect(()=>{const s=window.location.hostname;_(s==="localhost"||s==="127.0.0.1"?"http://localhost:8000":"https://darkgreen-walrus-291443.hostingersite.com/api")},[]),o.useEffect(()=>{l&&fetch(`${l}/users.php`).then(s=>s.json()).then(r).catch(()=>p("Error al cargar usuarios"))},[l]);const x=s=>{t(c=>({...c,[s.target.name]:s.target.value}))},E=async s=>{if(s.preventDefault(),!!l){d(null),p(null),f(!0);try{const c=new FormData;c.append("email",a.email),c.append("password",a.password);const j=await fetch(`${l}/register.php`,{method:"POST",body:c}),g=await j.json();if(j.ok){d(g.success),t({email:"",password:""});const b=await(await fetch(`${l}/users.php`)).json();r(b)}else p(g.error||"Error desconocido")}catch{p("Error en la conexión")}f(!1)}};return l?e.jsxs("div",{style:{padding:20},children:[e.jsx("h1",{children:"Registro de Usuario"}),n&&e.jsx("p",{style:{color:"green"},children:n}),u&&e.jsx("p",{style:{color:"red"},children:u}),e.jsxs("form",{onSubmit:E,children:[e.jsx("input",{type:"email",name:"email",placeholder:"Email",value:a.email,onChange:x,required:!0}),e.jsx("br",{}),e.jsx("input",{type:"password",name:"password",placeholder:"Contraseña",value:a.password,onChange:x,required:!0}),e.jsx("br",{}),e.jsx("button",{type:"submit",disabled:m,children:m?"Registrando...":"Registrar"})]}),e.jsx("h2",{children:"Usuarios Registrados"}),e.jsxs("table",{border:"1",cellPadding:"5",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Email"})]})}),e.jsx("tbody",{children:i.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.id}),e.jsx("td",{children:s.email})]},s.id))})]})]}):e.jsx("p",{children:"Cargando..."})}export{L as default};
