var ce=Object.defineProperty;var ie=(s,t,e)=>t in s?ce(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var z=(s,t,e)=>(ie(s,typeof t!="symbol"?t+"":t,e),e);import{A as E,N as de}from"./NotFoundResource.5957dfda.js";import{_ as $,o,c as r,a as n,b as d,d as D,r as N,t as x,n as Z,u as y,F as w,e as C,f as F,g as I,w as S,p as q,h as Y,i as V,j as A,T as ue,k as b,B as j,l as L,v as _e,m as ve,q as H,s as G,x as pe,y as he,S as be}from"./index.d33f9ce6.js";import{r as B}from"./reservationAPI.243605ec.js";import{T as me,E as J,S as K,a as Q,b as fe}from"./save-16-regular.539d7a1f.js";import{g as ge,t as W}from"./tableAPI.9ddd6b12.js";import"./API.1ed030f5.js";const ye={class:"main-wrapper"},xe={class:"header"},$e={class:"content-wrapper"},Te={__name:"ReservationsSkeleton",setup(s){return(t,e)=>(o(),r("div",ye,[n("div",xe,[d(E,{class:"header-text",height:"30px",width:"400px","border-radius":"100px"})]),n("div",$e,[d(E,{class:"date-navigation",height:"80px",width:"100%","border-radius":"100px"}),d(E,{class:"header-text",height:"150px",width:"80%","border-radius":"50px"}),d(E,{class:"header-text",height:"300px",width:"80%","border-radius":"100px"})])]))}},we=$(Te,[["__scopeId","data-v-6a8523d0"]]);const Ce={__name:"ButtonAction",props:{text:String,color:String},setup(s){const t=s,e=D(()=>({"--main-color":t.color}));return(i,l)=>(o(),r("button",{class:"wrapper",style:Z(y(e))},[N(i.$slots,"icon",{},void 0,!0),n("div",null,x(t.text),1)],4))}},P=$(Ce,[["__scopeId","data-v-8c2d6235"]]),Se={viewBox:"0 0 15 15",width:"1.2em",height:"1.2em"},ke=n("path",{fill:"currentColor","fill-rule":"evenodd",d:"M.877 7.5a6.623 6.623 0 1 1 13.246 0a6.623 6.623 0 0 1-13.246 0ZM7.5 1.827a5.673 5.673 0 1 0 0 11.346a5.673 5.673 0 0 0 0-11.346Zm2.354 3.32a.5.5 0 0 1 0 .707L8.207 7.5l1.647 1.646a.5.5 0 0 1-.708.708L7.5 8.207L5.854 9.854a.5.5 0 0 1-.708-.708L6.793 7.5L5.146 5.854a.5.5 0 0 1 .708-.708L7.5 6.793l1.646-1.647a.5.5 0 0 1 .708 0Z","clip-rule":"evenodd"},null,-1),Re=[ke];function Ie(s,t){return o(),r("svg",Se,Re)}const De={name:"radix-icons-cross-circled",render:Ie};const Ee=s=>(q("data-v-42461b0b"),s=s(),Y(),s),Oe={class:"main-wrapper"},Be={key:"1"},Me={class:"header-row"},Pe=Ee(()=>n("th",null,"#",-1)),Ae={key:0,class:"actions"},Le={key:1,class:"status"},Ne={__name:"TableView",props:{fields:Object,collection:Array},emits:["onOpen","onSelectedReservation","onCanceledReservation"],setup(s,{emit:t}){const e=s,i=u=>{t("onSelectedReservation",u)},l=u=>{t("onOpen",{isOpen:!0,headerText:u})},a=u=>u.toUpperCase(),c=u=>u==="missed",_=async u=>{try{const m=await B.cancelReservation(u.id);console.log(m),t("onCanceledReservation")}catch(m){console.log(m)}};return(u,m)=>(o(),r("div",Oe,[e.collection.length!==0?(o(),r("table",Be,[n("thead",null,[n("tr",Me,[(o(!0),r(w,null,C(e.fields,h=>(o(),r("th",{key:h},x(h),1))),128)),Pe])]),n("tbody",null,[(o(!0),r(w,null,C(e.collection,h=>(o(),r("tr",{class:"body-row",key:h},[(o(!0),r(w,null,C(e.fields,(p,T)=>(o(),r("td",{key:p},x(h[T]),1))),128)),n("td",null,[h.resStatus==="pending"?(o(),r("div",Ae,[d(P,{text:"Seat",color:"#22c55e",onClick:p=>{l("Choose Table"),i(h)}},null,8,["onClick"]),d(P,{text:"Edit",color:"#3b82f6",onClick:p=>{l("Edit Reservation"),i(h)}},null,8,["onClick"]),d(P,{text:"Cancel",color:"#ef4444",onClick:p=>_(h)},null,8,["onClick"])])):(o(),r("div",Le,[n("p",{class:F(c(h.resStatus)?"redColor":"blueColor")},x(a(h.resStatus)),3)]))])]))),128))])])):(o(),I(de,{key:1,class:"test",text:"No Reservations",position:"relative"},{icon:S(()=>[d(y(De),{class:"vector"})]),_:1}))]))}},Fe=$(Ne,[["__scopeId","data-v-42461b0b"]]),Ve={viewBox:"0 0 32 32",width:"1.2em",height:"1.2em"},je=n("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2 30L30 2m0 28L2 2"},null,-1),Ue=[je];function ze(s,t){return o(),r("svg",Ve,Ue)}const He={name:"bytesize-close",render:ze};const Ge={key:0,class:"main-wrapper"},Ze={class:"popup-wrapper"},qe={class:"header"},Ye={class:"popup-content"},Je={__name:"PopupBox",props:{isOpen:Boolean,headerText:String,isClosable:Boolean},emits:["closeModal"],setup(s,{emit:t}){const e=s;return(i,l)=>(o(),I(ue,{name:"popupAnimation"},{default:S(()=>[e.isOpen?(o(),r("div",Ge,[n("div",{class:"overlay",onClick:l[1]||(l[1]=V(a=>e.isClosable?t("closeModal"):null,["self"]))},[n("div",Ze,[n("div",qe,[n("h1",null,x(e.headerText),1),e.isClosable?(o(),r("button",{key:0,onClick:l[0]||(l[0]=a=>t("closeModal"))},[d(y(He))])):A("",!0)]),n("div",Ye,[N(i.$slots,"popup-content",{},void 0,!0)])])])])):A("",!0)]),_:3}))}},Ke=$(Je,[["__scopeId","data-v-60f2b69b"]]);const Qe={class:"main-wrapper"},We={__name:"EditReservation",props:{reservation:Object},emits:["onEdited"],setup(s,{emit:t}){var u,m,h;const e=s;console.log(e.reservation);const i=b({resDate:{textBoxType:"date",id:"resDate",labelText:"Reservation Date",placeholderText:"Enter reservation date...",value:(u=e.reservation)==null?void 0:u.resDate},resTime:{textBoxType:"time",id:"resTime",labelText:"Reservation Time",placeholderText:"Enter reservation time...",value:(m=e.reservation)==null?void 0:m.resTime},people:{textBoxType:"number",id:"people",labelText:"Number of People",placeholderText:"Enter the number of people...",value:(h=e.reservation)==null?void 0:h.people.toString()}}),l=b({}),a=b(!1),c=b(null),_=async()=>{l.value={},c.value=null,a.value=!1;try{const p=await B.editReservation(e.reservation.id,ge(i.value));t("onEdited"),a.value=!0,console.log(p)}catch(p){p.response&&p.response.data&&(l.value=p.response.data.errors,c.value=p.response.data.message),console.log(p)}};return(p,T)=>(o(),r("div",Qe,[n("form",{onSubmit:T[0]||(T[0]=V(g=>_(),["prevent"]))},[(o(!0),r(w,null,C(i.value,g=>(o(),I(me,{key:g.id,"text-box-type":g.textBoxType,id:g.id,"label-text":g.labelText,"placeholder-text":g.placeholderText,errors:l.value,input:g.value,"onUpdate:input":R=>g.value=R},null,8,["text-box-type","id","label-text","placeholder-text","errors","input","onUpdate:input"]))),128)),d(J,{"error-flag":c.value,"error-message":c.value},null,8,["error-flag","error-message"]),d(K,{class:"success","is-successful":a.value,"success-message":"Done!"},null,8,["is-successful"]),d(j,{text:"Done"},{icon:S(()=>[d(y(Q))]),_:1})],32)]))}},Xe=$(We,[["__scopeId","data-v-c4ba2bf4"]]);const et={class:"wrapper"},tt=["for"],st=["name"],ot={value:"",disabled:"",selected:"",hidden:""},nt=["value"],at={key:0,class:"errors-wrapper"},rt={__name:"ComboBox",props:{id:String,labelText:String,placeholderText:String,collection:Array,selectedItem:Number,errors:Object},emits:["update:selectedItem"],setup(s,{emit:t}){const e=s,i=D({get(){return e.selectedItem},set(l){t("update:selectedItem",l)}});return(l,a)=>(o(),r("div",et,[n("label",{for:e.id},x(e.labelText),9,tt),L(n("select",{class:F(["input",{redBorder:e.errors&&e.errors[s.id]}]),name:e.id,"onUpdate:modelValue":a[0]||(a[0]=c=>ve(i)?i.value=c:null),required:""},[n("option",ot,x(e.placeholderText),1),(o(!0),r(w,null,C(e.collection,c=>(o(),r("option",{key:c.id,value:c==null?void 0:c.id},x(c==null?void 0:c.name),9,nt))),128))],10,st),[[_e,y(i)]]),e.errors&&e.errors[s.id]?(o(),r("div",at,[(o(!0),r(w,null,C(e.errors[s.id],c=>(o(),r("div",{key:c.id,class:"error"},[d(y(fe)),n("p",null,x(c),1)]))),128))])):A("",!0)]))}},lt=$(rt,[["__scopeId","data-v-d1373fe3"]]),ct=["onSubmit"],it={__name:"ChooseTable",props:{freeTables:Array,reservation:Object},emits:["onChosen"],setup(s,{emit:t}){const e=s,i=b({tableId:null}),l=b(null),a=b(!1),c=async()=>{l.value=null,a.value=!1;try{const _=await B.chooseTable(e.reservation.id,i.value);console.log(_),a.value=!0,t("onChosen")}catch(_){_.response&&_.response.data&&_.response.status===400&&(t("onChosen"),l.value=_.response.data.message),console.log(_)}};return(_,u)=>(o(),r("div",null,[n("form",{onSubmit:V(c,["prevent"])},[d(lt,{id:"table","label-text":"Table","placeholder-text":"Choose a table...",collection:e.freeTables,selectedItem:i.value.tableId,"onUpdate:selectedItem":u[0]||(u[0]=m=>i.value.tableId=m)},null,8,["collection","selectedItem"]),d(K,{"is-successful":a.value,"success-message":"Successfully reserved a table!"},null,8,["is-successful"]),d(J,{"error-flag":l.value,"error-message":l.value},null,8,["error-flag","error-message"]),d(j,{text:"Done"},{icon:S(()=>[d(y(Q))]),_:1})],40,ct)]))}};const dt={class:"main-wrapper"},ut={class:"grid-container"},_t={__name:"GridContainer",props:{collection:Array},setup(s){const t=s;return(e,i)=>(o(),r("div",dt,[n("div",ut,[(o(!0),r(w,null,C(t.collection,l=>(o(),r("div",{key:l.id,class:"grid-item-container"},[N(e.$slots,"card",{item:l},void 0,!0)]))),128))])]))}},vt=$(_t,[["__scopeId","data-v-8af9f181"]]);const pt={class:"main-wrapper"},ht={class:"header"},bt={class:"table-status"},mt={class:"content"},ft={__name:"RestaurantTable",props:{table:Object},emits:["onFreedTable"],setup(s,{emit:t}){const e=s,i=D(()=>({"--columns":e.table.capacity})),l=async a=>{try{const c=await W.freeTable(a);t("onFreedTable"),console.log(c)}catch(c){console.log(c)}};return(a,c)=>{var _,u;return o(),r("div",pt,[n("div",ht,[n("div",null,x((_=e.table)==null?void 0:_.name),1),L(n("div",bt,"Occupied",512),[[H,e.table.isOccupied]]),L(n("div",{class:"free-table-button",onClick:c[0]||(c[0]=m=>l(e.table.id))}," Free ",512),[[H,e.table.isOccupied]])]),n("div",mt,[n("div",{class:"seats-wrapper",style:Z(y(i))},[(o(!0),r(w,null,C((u=e.table)==null?void 0:u.capacity,m=>(o(),r("div",{class:F(["circle",{blackColor:e.table.isOccupied}]),key:m},null,2))),128))],4)])])}}},gt=$(ft,[["__scopeId","data-v-35be07e3"]]),yt={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},xt=n("path",{fill:"currentColor",d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 0 0 0-48.4z"},null,-1),$t=[xt];function Tt(s,t){return o(),r("svg",yt,$t)}const wt={name:"ant-design-arrow-right-outlined",render:Tt},Ct={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},St=n("path",{fill:"currentColor",d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 0 0 0 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"},null,-1),kt=[St];function Rt(s,t){return o(),r("svg",Ct,kt)}const It={name:"ant-design-arrow-left-outlined",render:Rt},Dt=(s,t,e=()=>{},i=!1,l={threshold:1})=>{const a=new IntersectionObserver(c=>{c.forEach(_=>{_&&_.isIntersecting?(t(_.target),i&&a.unobserve(_.target)):e(_.target)})},l);return a.observe(s),a};class Et{constructor(){z(this,"datePattern",/^(\d{4}-\d{2}-\d{2})$/)}asDateString(t){return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`}validateDateFormat(t){return t.match(this.datePattern)}setToday(){return this.asDateString(new Date)}setPrevDay(t){let[e,i,l]=t.split("-");i-=1;const a=new Date(e,i,l);return a.setMonth(a.getMonth()),a.setDate(a.getDate()-1),this.asDateString(a)}setNextDay(t){let[e,i,l]=t.split("-");i-=1;const a=new Date(e,i,l);return a.setMonth(a.getMonth()),a.setDate(a.getDate()+1),this.asDateString(a)}}const O=new Et;const X=s=>(q("data-v-5af0c199"),s=s(),Y(),s),Ot={class:"main-wrapper"},Bt=X(()=>n("div",{class:"header"},[n("h1",null,"Reservations")],-1)),Mt={class:"content-wrapper"},Pt={class:"reservations-wrapper"},At={class:"date-navigation"},Lt={class:"table-wrapper"},Nt=X(()=>n("h1",null,"Tables",-1)),Ft={__name:"TheReservations",async setup(s){let t,e;const i=b({}),l=b({}),a=b({name:"Name",phone:"Phone",resTime:"Reservation Time"}),c=b(null),_=b(null),u=b(O.setToday()),m=D(()=>_.value.filter(v=>!v.isOccupied)),h=D(()=>c.value.filter(v=>v.resDate===u.value)),p=b(!1),T=b(""),g=b(null),R=async()=>{try{const v=await B.getReservations();c.value=v.data.collection}catch(v){console.log(v)}},M=async()=>{try{const v=await W.getAllTables();_.value=v.data.collection,console.log(_.value)}catch(v){console.log(v)}};[t,e]=G(()=>R()),await t,e(),[t,e]=G(()=>M()),await t,e();const U=async(v=!1)=>{await R(),v&&setTimeout(()=>{p.value=!1},2e3)},ee=async()=>{await M(),setTimeout(()=>{p.value=!1},2e3)},te=()=>{u.value=O.setToday()},se=()=>{u.value=O.setPrevDay(u.value)},oe=()=>{u.value=O.setNextDay(u.value)},ne=v=>{p.value=v==null?void 0:v.isOpen,T.value=v==null?void 0:v.headerText},ae=v=>{g.value=v,console.log(g.value)},re=()=>{document.documentElement.style.setProperty("--opacity-val",1),document.documentElement.style.setProperty("--blur-val",0)},le=()=>{document.documentElement.style.setProperty("--opacity-val",0),document.documentElement.style.setProperty("--blur-val","5px")};return pe(()=>{i.value=Dt(l.value,re,le,!0,{threshold:.2})}),he(()=>{i.value.disconnect()}),(v,f)=>(o(),r("div",Ot,[d(Ke,{"is-open":p.value,"header-text":T.value,"is-closable":!0,onCloseModal:f[2]||(f[2]=k=>p.value=!1)},{"popup-content":S(()=>[T.value==="Edit Reservation"?(o(),I(Xe,{key:0,reservation:g.value,onOnEdited:f[0]||(f[0]=k=>U(!0))},null,8,["reservation"])):(o(),I(it,{key:1,"free-tables":y(m),reservation:g.value,onOnChosen:f[1]||(f[1]=k=>{ee(),R()})},null,8,["free-tables","reservation"]))]),_:1},8,["is-open","header-text"]),Bt,n("div",Mt,[n("div",Pt,[n("h1",null,"Reservations for "+x(u.value),1),n("div",At,[d(y(It),{class:"vector",onClick:f[3]||(f[3]=k=>se())}),d(j,{text:"Today",onClick:f[4]||(f[4]=k=>te())}),d(y(wt),{class:"vector",onClick:f[5]||(f[5]=k=>oe())})]),n("div",Lt,[d(Fe,{fields:a.value,collection:y(h),onOnOpen:ne,onOnSelectedReservation:ae,onOnCanceledReservation:U},null,8,["fields","collection"])])]),n("div",{class:"all-tables",ref_key:"allTablesRef",ref:l},[Nt,d(vt,{collection:_.value},{card:S(k=>[d(gt,{table:k.item,onOnFreedTable:f[6]||(f[6]=Ut=>{M(),R()})},null,8,["table"])]),_:1},8,["collection"])],512)])]))}},Vt=$(Ft,[["__scopeId","data-v-5af0c199"]]),jt={class:"main-wrapper"},Kt={__name:"ReservationsView",setup(s){return(t,e)=>(o(),r("div",jt,[(o(),I(be,null,{default:S(()=>[d(Vt)]),fallback:S(()=>[d(we)]),_:1}))]))}};export{Kt as default};
